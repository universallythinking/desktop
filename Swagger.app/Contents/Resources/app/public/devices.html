<!DOCTYPE html>
<html>
<head>
    <title>Jukebox</title>
    <link rel="stylesheet" href="./styles/bootstrap-theme.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
    <meta name="viewport" content="initial-scale=1 minimum-scale=1 maximum-scale=1 user-scalable=0" />
    <script src="js/jquery-ui.js" onload="window.$ = window.jQuery = module.exports;"></script>
    <script src="js/create.js"></script>
    <style>
        #html {
            zoom: 150%;
            font-weight: 200;
            min-height: 150vh;
            background: black;
        }

        .songLinkClick {
            font-weight: 200;
        }

        #playlistContainer {
            color: white;
        }

        h5, p {
            font-size: 75%;
        }

        .inline {
            width: 22%;
        }

        .charlie {
            width: 100%;
        }

        .images {
            width: 100%;
            border: none;
            outline: none;
        }

        .row {
            width: 100%;
            float: none;
            text-align: center;
            margin: auto;
        }

        .half {
            width: 44%;
        }

        .fourth {
            width: 88%;
        }

        .playlists, .playlist {
            padding: 25px 25px 0 25px;
            display: inline-block;
            height: auto;
        }

        h5 {
            overflow: hidden;
            height: 25px;
        }

        div#playlistContainer {
            padding-left: 10%;
            min-height: 150vh;
        }
    </style>
    <script>
        localStorage.setItem("host", true);
        localStorage.setItem("allowed", true);
    </script>
</head>

<body id="html">
    <script>
        $(document).ready(function() {
    var access_token = localStorage.current_token;
    var devices = [];
    window.loadLists = function() {
    if (localStorage.userID) {
        $.ajax({
            async: true,
            type: "GET",
            url: "https://api.spotify.com/v1/me/player/devices",
            headers: { 'Authorization': 'Bearer ' + localStorage.current_token },
            dataType: "json",
            data: "formdata",
            success: function (data) {
              $("#html").append("<header style='color: white !important; pointer-events: all;' class='songLinkClick'><div><center style='font-size: 150%'>Choose a Device to Play Through...</center></div></header>");
              $("#html").append("<p style='color: white !important; pointer-events: all;' class='songLinkClick'><div style='color: white !important; pointer-events: all;'><center>(You Can Change This at Any Time)</center></div></p>");
			  for (var i = 0; i < data.devices.length; i++) {
          if (data.devices[i].type == "Computer") {
                  $("#html").append("<div name='" + data.devices[i].id.toString() + "' onclick='newDevice(\"" + data.devices[i].id.toString() + "\");' class='playlists inline p'><div class='charlie'><div class='row'><div><div><div><div style='height:50px; width:50px;'></div><div></div></div><div class='playlist-desc'><h3</h3><h3></h3><h5>" + data.devices[i].name + "</h5><p>Volume Level " +  data.devices[i].volume_percent + "%</p></div></div></div>");
}
          }
          $( ".playlists" ).wrapAll( "<div id='playlistContainer'></div>" );
            }
        });
    }
  }

  window.newDevice = function(playlist) {
    if (!localStorage.deviceID) { localStorage.wasPressed = 0; }
    else { localStorage.wasPressed = 3; }
      localStorage.deviceID = playlist;
      setTimeout(function() { location.href = "index.html"; }, 500);
  }

window.playHover = function () {
  for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
    $(".playlists").eq( i ).mouseenter(function() {
      $(this).css("width", "27%");
      $("#playlistContainer").css("padding-left", "5%");
});
$(".playlists").eq( i ).mouseleave(function() {
  $(this).css("width", "");
  $("#playlistContainer").css("padding-left", "");
});
}
  $( window ).resize(function() {
  	if ($(window).width() < 900 && $(window).width() > 200) {
  		for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
  			$(".playlists").eq(i).addClass("half");
  			$(".playlists").eq(i).removeClass("inline");
  			$(".playlists").eq(i).removeClass("fourth");
  		}
      for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
        $(".playlists").eq( i ).mouseenter(function() {
          $(this).css("width", "50%");
          $("#playlistContainer").css("padding-left", "5%");
    });
    $(".playlists").eq( i ).mouseleave(function() {
      $(this).css("width", "");
      $("#playlistContainer").css("padding-left", "");
    });
    }
  		}
  		else if ($(window).width() > 900) {
  			for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
  				$(".playlists").eq(i).addClass("inline");
  				$(".playlists").eq(i).removeClass("half");
  				$(".playlists").eq(i).removeClass("fourth");
  			}
        for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
          $(".playlists").eq( i ).mouseenter(function() {
            $(this).css("width", "27%");
            $("#playlistContainer").css("padding-left", "5%");
      });
      $(".playlists").eq( i ).mouseleave(function() {
        $(this).css("width", "");
        $("#playlistContainer").css("padding-left", "");
      });
      }
  			}
  			else if ($(window).width() < 200) {
  				for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
  					$(".playlists").eq(i).addClass("fourth");
  					$(".playlists").eq(i).removeClass("inline");
  					$(".playlists").eq(i).removeClass("half");
  				}
          for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
            $(".playlists").eq( i ).mouseenter(function() {
              $(this).css("width", "90%");
              $("#playlistContainer").css("padding-left", "5%");
        });
        $(".playlists").eq( i ).mouseleave(function() {
          $(this).css("width", "");
          $("#playlistContainer").css("padding-left", "5%");
        });
        }
  				}
  });
window.stay = function(){
  location.href = "index.html";
    }
        if ($(window).width() < 900 && $(window).width() > 200) {
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).addClass("half");
                $(".playlists").eq(i).removeClass("inline");
                $(".playlists").eq(i).removeClass("fourth");
            }
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).mouseenter(function () {
                    $(this).css("width", "50%");
                    $("#playlistContainer").css("padding-left", "5%");
                });
                $(".playlists").eq(i).mouseleave(function () {
                    $(this).css("width", "");
                    $("#playlistContainer").css("padding-left", "");
                });
            }
            //    $(".playlists").eq(0).mouseenter();
        }
        else if ($(window).width() > 900) {
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).addClass("inline");
                $(".playlists").eq(i).removeClass("half");
                $(".playlists").eq(i).removeClass("fourth");
            }
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).mouseenter(function () {
                    $(this).css("width", "27%");
                    $("#playlistContainer").css("padding-left", "5%");
                });
                $(".playlists").eq(i).mouseleave(function () {
                    $(this).css("width", "");
                    $("#playlistContainer").css("padding-left", "");
                });
            }
            //    $(".playlists").eq(0).mouseenter();
        }
        else if ($(window).width() < 200) {
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).addClass("fourth");
                $(".playlists").eq(i).removeClass("inline");
                $(".playlists").eq(i).removeClass("half");
            }
            for (var i = 0; i < $("#playlistContainer").children(".playlists").length; i++) {
                $(".playlists").eq(i).mouseenter(function () {
                    $(this).css("width", "90%");
                    $("#playlistContainer").css("padding-left", "5%");
                });
                $(".playlists").eq(i).mouseleave(function () {
                    $(this).css("width", "");
                    $("#playlistContainer").css("padding-left", "5%");
                });
            }
            //    $(".playlists").eq(0).mouseenter();
        }
            }
//playhover
          setTimeout(function(){
            loadLists();
          }, 700);
          setTimeout(function(){
            playHover();
          }, 1500);
        });
    </script>

</body>
</html>
